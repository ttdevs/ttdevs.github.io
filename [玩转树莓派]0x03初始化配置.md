
---
title: 「玩转树莓派」0x03初始化配置
date: 1970-01-01 00:00:00
updated: 2017-04-27 19:07:57
comments: true
tags:
    - 玩转树莓派
categories:
    - 技术
toc: true
cover: cover.jpg 
---


## 0x00 系统的初始化配置

Config Raspberry Pi

系统的默认配置有时候无法满足我们多样的实际情况，比如我们的时区、我们的语言、我们外接显示器的接口类型和参数等等， 这个时候就需要我们对系统的默认配置进行修改，来满足我们的具体的要求。下面给大家介绍可能需要用到的配置。


## 0x01 config.txt

`config.txt` 这是一个重要的系统配置文件，我们可以到 Raspberry Pi 的这个 `/boot/config.txt` 目录下查看，也可直接在 TF 卡的根目录下找到他。部分配置可参考：[树莓派的安装](0x01 Install Raspbian.md) 。更多的配置我们会在以后用到的时候讲解。


## 0x02 raspi-config

`raspi-config` 这个工具可以对系统进行各种[配置](https://www.raspberrypi.org/documentation/configuration/raspi-config.md)，需要使用系统权限执行：`sudo raspi-config`。打开后我们会见到如下图的配置界面：

![raspi-config](http://upload-images.jianshu.io/upload_images/1801981-697b513cfffa95d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这个界面操作比较简单，如果你用过DOS系统，肯定不会陌生。一般情况只有下面几种按键：`Esc`、`Tab`、`上`、`下`、`左`、`右`、`Space`、`回车`。确认按`回车`，返回用`Esc`，选择用`Space`、`上`、`下`和`Tab`。

- Expand Filesystem 

	说他重要主要是因为很多小伙伴比较好奇 `为什么我的文件系统变小了`，只有MB级，而你用的却是16或者32G的存储卡。如果你也有这个疑问，则可以通过执行这个选项来扩展你的文件系统使其可以使用整个存储卡。
	
- Change User Password
	
	字面意思，修改你 Raspbian 的 `pi` 用户的密码

- Boot Options

	选择你的启动方式，如使用Console or GUI，是否自动登录

- Wait for Network at Boot

	是否在启动过程中等待网络连接，默认就好

- Internationalistion Options

	国际化支持，修改你的位置，时区，键盘布局，Wifi等。
	
	1. Change Locale：
	
		- 若果你可以无障碍使用英文，建议不做改动
		- 若想使用中文，改为：`zh_CN.UTF-8 UTF-8`。改动之后建议安装中文字体，否则可能会出现乱码（四个数字的方块），具体参考下面的中文乱码。
![raspi-config locale](http://upload-images.jianshu.io/upload_images/1801981-98f2afb853686149.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	
	2. TimeZone：东八区，所以我们选择：`Asiz` > `Shanghai`
	3. Keyboard Layout：这个我们可以使用默认，或者根据你实际使用键盘选择
	4. Wifi：我们选择 `CN China`

- Enable Camera

	Camera，不确定是启用我们自己的USB摄像头还是官方的摄像头，选择 `Enable`

- Add to Rastrack

	一台设备，此处不做改动

- Overclock

	超频，这个自己决定，个人感觉没必要

- Advanced Options

	这里的选项比较多，共11项，以后用到的时候再过来介绍
	![raspi-config advaned](http://upload-images.jianshu.io/upload_images/1801981-ce2b21c3e59670ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- About raspi-config
	
	这个就不说了，没事可以读读


## 0x03 更新软件源

如果你使用默认的软件源，很多时候速度是非常慢的，所以我们考虑换成国内的镜像。树莓派的软件源列表请参考[这里](http://www.raspbian.org/RaspbianMirrors)，`sources.list` 的信息可参考[这里](https://www.debian.org/doc/manuals/debian-handbook/apt.zh-cn.html#sect.apt-sources.list)。

可能你会问怎么选择，首先天朝的网络肯定选国内的，国内的简单来说选择离自己近的，运营商相同的，当然你也可以通过专业的测速工具来决定。我选择了 Open Source Software Association of Chinese Academy of Sciences（http://mirrors.opencas.cn/raspbian/raspbian/），下面介绍修改方法：

- 首先备份源列表

	`pi@raspi:/etc/apt $ sudo cp sources.list sources.list.bak`
	
- 编辑源列表

	`sudo nano sources.list`
	
	``` shell
	pi@raspi:/etc/apt $ cat sources.list
	#deb http://mirrordirector.raspbian.org/raspbian/ jessie main contrib non-free rpi
	# Uncomment line below then 'apt-get update' to enable 'apt-get source'
	#deb-src http://archive.raspbian.org/raspbian/ jessie main contrib non-free rpi
	
	deb http://mirrors.opencas.cn/raspbian/raspbian/ jessie main contrib non-free rpi
	# Uncomment line below then 'apt-get update' to enable 'apt-get source'
	deb-src http://mirrors.opencas.cn/raspbian/raspbian/ jessie main contrib non-free rpi
	```
	
- 更新

	`sudo apt-get update`	


## 0x04 中文乱码

如果你在Change Locale 中选择了 `zh_CN.UTF-8`就可能出现中文乱码的问题，下面介绍如何修改：

- 安装字体：`sudo apt-get install ttf-wqy-zenhei`
				
	>顺便安装输入法：`sudo apt-get -y install scim-pinyin`
				
- 使用自己的字体：将自己的字体放到 `~/.local/share/fonts/` or `~/.fonts` 文件夹中（没有的话就创建），然后刷新字体 `fc-cache -fv` 或者 重启

经过上面的配置，基本上就可以使用我们的 Raspberry Pi 了。接下来再给大家介绍如果突破天朝的网络问题，然后我们就可以正式的玩转树莓派了～～

![Create by ttdevs](https://raw.githubusercontent.com/ttdevs/ttdevs.github.io/common/images/logo.png)


